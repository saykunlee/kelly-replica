---
description: 작업 마무리 시 자동으로 진행되는 표준화된 워크플로우 규칙
alwaysApply: false
---
# 작업 마무리 워크플로우

사용자가 "작업을 마무리해줘"라고 요청할 때 다음 3단계를 순차적으로 진행합니다.

## 워크플로우 단계

### 1단계: 관련 문서 확인 및 갱신

**목적**: 작업과 관련된 참조 문서를 최신 상태로 유지

**절차**:
1. `doc/` 폴더에서 현재 작업과 관련된 문서 검색
   - 작업 내용의 키워드로 검색 (예: "JWT", "보안", "API" 등)
   - 폴더 구조 기반 탐색 (frontend/, backend/, api/ 등)

2. 관련 문서가 있는 경우:
   - 문서 내용 확인
   - 변경사항 반영 필요 여부 판단
   - 필요시 문서 업데이트 (새 기능, API 변경, 설정 등)
   - 업데이트 날짜 기록 (시스템 날짜 사용)

3. 관련 문서가 없는 경우:
   - 새 문서 생성 필요 여부 판단
   - 필요시 `DOCUMENTATION_RULES.md` 규칙에 따라 생성
   - 적절한 폴더에 배치

**업데이트 대상 문서 예시**:
- `doc/CHANGELOG.md` - 변경 이력 추가
- `doc/frontend/integration-guide.md` - API 변경사항 반영
- `doc/api/reference.md` - 새 엔드포인트 추가
- `doc/backend/restful-guide.md` - 새 기능 가이드 추가
- 폴더별 README.md - 새 문서 링크 추가

---

### 2단계: GitHub 이슈 관리

**목적**: 작업 내역을 GitHub 이슈로 추적

**절차**:

1. **관련 이슈 검색**
   - 현재 컨텍스트 윈도우의 작업 내용 분석
   - GitHub에서 관련 키워드로 이슈 검색
   - Open 상태 이슈 우선 확인

2. **이슈 판단**
   - **관련 이슈 없음** → 신규 이슈 생성
   - **관련 이슈 1개** → 해당 이슈 업데이트
   - **관련 이슈 여러개** → 가장 적합한 이슈 선택 후 업데이트

3. **신규 이슈 생성 시**
   - 제목: `[v버전] 작업 완료: [작업 내용 요약]`
   - 본문 구성:
     ```markdown
     ## 작업 내용
     - 주요 변경사항 나열
     
     ## 구현된 기능
     - 기능 목록
     
     ## 생성/수정 파일
     - 파일 목록 (개수)
     
     ## 관련 문서
     - [문서명](doc/path/to/file.md)
     - [문서명](doc/path/to/file.md)
     
     ## 다음 단계
     - [ ] 필요한 작업들
     
     ---
     **작업 완료일**: YYYY-MM-DD
     ```

4. **기존 이슈 업데이트 시**
   - 이슈 본문에 진행사항 추가
   - 형식:
     ```markdown
     ---
     ## 📅 업데이트: YYYY-MM-DD
     
     ### 추가 작업 내용
     - 변경사항 나열
     
     ### 관련 문서
     - [문서명](doc/path/to/file.md)
     ```
   - 시스템 날짜를 사용하여 작업 일시 기록

5. **이슈에 문서 링크 포함**
   - 관련된 모든 문서 링크 추가
   - 상대 경로 사용 (예: `doc/frontend/integration-guide.md`)
   - 주요 변경 문서는 별도로 강조

---

### 3단계: Git 커밋

**목적**: 변경사항을 버전 관리 시스템에 기록

**절차**:

1. **커밋 메시지 작성**
   ```
   feat: [작업 내용 요약]
   
   [카테고리1]
   - 변경사항1
   - 변경사항2
   
   [카테고리2]
   - 변경사항1
   
   [문서]
   - doc/path/to/file.md: 설명
   - doc/path/to/file.md: 설명
   
   Closes #이슈번호
   
   관련 문서:
   - doc/frontend/integration-guide.md
   - doc/SECURITY_IMPLEMENTATION_COMPLETE.md
   ```

2. **스테이징 및 커밋**
   - `git add -A` - 모든 변경사항 스테이징
   - `git commit` - 메시지와 함께 커밋
   - **사용자 허락 없이 자동 진행** (이 커서룰 참조 시)

3. **커밋에 문서 링크 포함**
   - 커밋 메시지 하단에 "관련 문서" 섹션 추가
   - 주요 변경 문서 링크
   - 신규 생성 문서 강조

---

## 실행 조건

이 워크플로우는 다음 조건에서만 실행됩니다:
- ✅ 사용자가 명시적으로 "작업을 마무리해줘"라고 요청
- ✅ 현재 세션에서 실제 작업이 진행됨
- ✅ 변경사항이 커밋 가능한 상태

## 자동 실행 권한

**이 커서룰(`@work-completion-workflow.mdc`)을 참조하여 작업 마무리를 요청한 경우:**
- ✅ 사용자 허락 없이 자동으로 커밋 진행
- ✅ 이슈 등록도 자동 진행
- ✅ 문서 갱신도 자동 진행

**이유**: 작업 마무리는 명시적 요청이므로 자동화 가능

---

## 예시 실행

### 1. 일반 작업 마무리
```
사용자: "@work-completion-workflow.mdc 작업을 마무리해줘"

AI:
✅ 1단계: 관련 문서 확인 및 갱신
   - doc/CHANGELOG.md 업데이트
   - doc/frontend/integration-guide.md 갱신
   - doc/api/reference.md 업데이트

✅ 2단계: GitHub 이슈 관리
   - 관련 이슈 검색: "JWT 인증" 키워드
   - 이슈 #123 발견 → 진행사항 추가
   - 작업 일시: 2025-11-04 기록

✅ 3단계: Git 커밋
   - 커밋 해시: abc1234
   - 이슈 #123 연결
   - 문서 링크 포함

완료: 모든 작업이 성공적으로 마무리되었습니다.
```

### 2. 신규 기능 작업
```
사용자: "@work-completion-workflow.mdc 작업을 마무리해줘"

AI:
✅ 1단계: 관련 문서 확인 및 갱신
   - doc/CHANGELOG.md 업데이트
   - 관련 문서 없음 → 신규 생성 불필요 판단

✅ 2단계: GitHub 이슈 관리
   - 관련 이슈 없음 → 신규 이슈 생성
   - 이슈 #124 생성: "[v2.0] 신규 기능 구현"
   - 문서 링크 포함

✅ 3단계: Git 커밋
   - 커밋 해시: def5678
   - Closes #124
   - 문서 링크 포함

완료: 작업이 성공적으로 마무리되었습니다.
```

---

## 문서 갱신 가이드라인

### 항상 갱신해야 하는 문서

1. **`doc/CHANGELOG.md`** (필수)
   - 모든 주요 변경사항 기록
   - 날짜, 버전, 변경 내용

2. **폴더별 README.md** (신규 문서 추가 시)
   - 새 문서가 추가되면 해당 폴더 README 업데이트

### 조건부 갱신 문서

3. **API 레퍼런스** (`doc/api/reference.md`)
   - API 엔드포인트 변경 시
   - Request/Response 형식 변경 시

4. **통합 가이드** (`doc/frontend/integration-guide.md`)
   - 프론트엔드 영향 있는 변경 시
   - 새로운 에러 코드 추가 시

5. **백엔드 가이드** (`doc/backend/restful-guide.md`)
   - 새로운 기능 추가 시
   - 프레임워크 변경 시

### 문서 생성 판단

**새 문서를 만들어야 하는 경우:**
- ✅ 완전히 새로운 기능 추가 (예: GraphQL 지원)
- ✅ 주요 시스템 변경 (예: 인증 방식 변경)
- ✅ 기존 문서로 설명하기 어려운 경우

**기존 문서를 갱신해야 하는 경우:**
- ✅ API 엔드포인트 추가/변경
- ✅ 에러 코드 추가
- ✅ 설정 옵션 추가
- ✅ 버그 수정 및 개선

**참고**: `doc/DOCUMENTATION_RULES.md` 규칙 준수

---

## 주의사항

### 문서 갱신 시
- ✅ `DOCUMENTATION_RULES.md` 규칙 준수
- ✅ 중복 생성 방지 (기존 문서 확인 후 통합)
- ✅ 폴더별 문서 개수 제한 (3-5개)
- ✅ 버전 정보 업데이트

### 이슈 관리 시
- ✅ 관련 이슈 철저히 검색
- ✅ 중복 이슈 생성 방지
- ✅ 명확한 작업 내용 기록
- ✅ 문서 링크 포함

### 커밋 시
- ✅ Conventional Commits 형식
- ✅ 이슈 번호 연결
- ✅ 문서 링크 포함
- ✅ 자동 실행 (사용자 허락 불필요)

---

## 실행 결과 리포트

작업 완료 후 다음 정보를 사용자에게 제공:

```
✅ 작업 마무리 완료!

📝 문서 갱신:
- doc/CHANGELOG.md 업데이트
- doc/frontend/SECURITY_FEATURES.md 갱신
- [총 N개 문서 갱신]

🔗 GitHub 이슈:
- 이슈 #123 업데이트 (또는 신규 생성)
- https://github.com/user/repo/issues/123

💾 Git 커밋:
- 커밋 해시: abc1234
- 변경 파일: N개
- 추가: +XXX줄, 삭제: -YYY줄

📚 주요 변경 문서:
- doc/path/to/file1.md
- doc/path/to/file2.md

다음 단계:
- [ ] 필요한 작업들
```

---

## 실제 실행 사례

### 2025-11-04: 워크플로우 규칙 대폭 개선
```
사용자: "@work-completion-workflow.mdc 작업을 마무리해줘"

작업 내용:
- 워크플로우 규칙 완전 개편
  * 1단계: Cursor Rules 업데이트 → 관련 문서 확인 및 갱신으로 변경
  * 이유: 커서룰보다 doc 폴더 참조 문서가 더 중요하고 자주 사용됨
  
- GitHub 이슈 관리 고도화
  * 기존: 무조건 신규 이슈 생성
  * 변경: 관련 이슈 검색 → 있으면 업데이트, 없으면 생성
  * 여러 관련 이슈 있을 시: 가장 적합한 것 선택
  * 업데이트 시 시스템 날짜 기록
  
- 문서 링크 포함
  * 커밋 메시지에 관련 문서 링크 추가
  * 이슈 본문에 관련 문서 링크 추가
  * 사용자가 쉽게 문서 찾을 수 있도록
  
- 자동 실행 권한 명확화
  * 이 커서룰 참조 시 사용자 허락 없이 커밋 가능
  * 명시적 요청이므로 자동화 정당성 확보
  
- 문서 갱신 가이드라인 추가
  * 항상 갱신: CHANGELOG.md, 폴더 README.md
  * 조건부 갱신: API reference, integration-guide 등
  * 신규 생성 판단 기준 제시
  
- 실행 결과 리포트 형식 정의
  * 문서 갱신 내역
  * 이슈 링크
  * 커밋 정보
  * 주요 변경 문서
  * 다음 단계

핵심 개선:
✅ 커서룰 업데이트 → 문서 갱신으로 초점 변경
✅ GitHub 이슈 중복 방지 및 기록 연속성 확보
✅ 문서 링크로 추적성 강화
✅ 자동화 범위 명확화
✅ DOCUMENTATION_RULES.md와 통합
✅ 실용성 대폭 향상
```

---

## 참고 문서

- `doc/DOCUMENTATION_RULES.md` - 문서 작성 및 관리 규칙
- `doc/CHANGELOG.md` - 변경 이력 기록 방법
- GitHub Issues - 이슈 관리 베스트 프랙티스

