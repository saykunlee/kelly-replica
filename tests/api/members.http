### ============================================
### Members API 테스트 (REST Client)
### ============================================
### 사용법: 각 요청 위의 "Send Request" 클릭
### 또는 Ctrl+Alt+R (Windows/Linux) / Cmd+Alt+R (Mac)
### ============================================

@baseUrl = http://localhost:3005
@apiVersion = v1
@contentType = application/json

### ============================================
### 1. 테스트 엔드포인트 - API 동작 확인
### ============================================
GET {{baseUrl}}/api/{{apiVersion}}/members/test
Accept: {{contentType}}


### ============================================
### 2. 회원 목록 조회 (GET /members)
### ============================================

### 2-1. 기본 목록 조회
GET {{baseUrl}}/api/{{apiVersion}}/members
Accept: {{contentType}}

### 2-2. 페이지네이션 (2페이지, 10개씩)
GET {{baseUrl}}/api/{{apiVersion}}/members?page=2&limit=10
Accept: {{contentType}}

### 2-3. 정렬 (ID 오름차순)
GET {{baseUrl}}/api/{{apiVersion}}/members?sort=mem_id&order=ASC
Accept: {{contentType}}

### 2-4. 필터링 (이메일로 검색)
GET {{baseUrl}}/api/{{apiVersion}}/members?mem_email=test@example.com
Accept: {{contentType}}

### 2-5. 복합 쿼리 (페이징 + 정렬 + 필터)
GET {{baseUrl}}/api/{{apiVersion}}/members?page=1&limit=20&sort=mem_username&order=ASC&mem_level=1
Accept: {{contentType}}


### ============================================
### 3. 회원 상세 조회 (GET /members/{id})
### ============================================

### 3-1. 특정 회원 조회 (ID: 1)
GET {{baseUrl}}/api/{{apiVersion}}/members/1
Accept: {{contentType}}

### 3-2. 캐시 테스트 - ETag 포함
# @name getMember
GET {{baseUrl}}/api/{{apiVersion}}/members/1
Accept: {{contentType}}

### 3-3. 조건부 요청 - If-None-Match (304 응답 확인)
GET {{baseUrl}}/api/{{apiVersion}}/members/1
Accept: {{contentType}}
If-None-Match: {{getMember.response.headers.ETag}}


### ============================================
### 4. 회원 생성 (POST /members)
### ============================================

### 4-1. 정상 회원 생성
# @name createMember
POST {{baseUrl}}/api/{{apiVersion}}/members
Content-Type: {{contentType}}
Accept: {{contentType}}

{
  "mem_userid": "testuser001",
  "mem_password": "securePassword123!",
  "mem_email": "testuser001@example.com",
  "mem_username": "테스트 사용자",
  "mem_phone": "010-1234-5678",
  "mem_nickname": "테스터",
  "mem_level": 1
}

### 4-2. 유효성 검증 실패 테스트 (짧은 비밀번호)
POST {{baseUrl}}/api/{{apiVersion}}/members
Content-Type: {{contentType}}
Accept: {{contentType}}

{
  "mem_userid": "shortpw",
  "mem_password": "123",
  "mem_email": "short@example.com",
  "mem_username": "짧은비번"
}

### 4-3. 유효성 검증 실패 테스트 (중복 이메일)
POST {{baseUrl}}/api/{{apiVersion}}/members
Content-Type: {{contentType}}
Accept: {{contentType}}

{
  "mem_userid": "duplicate001",
  "mem_password": "password123!",
  "mem_email": "testuser001@example.com",
  "mem_username": "중복테스트"
}

### 4-4. 유효성 검증 실패 테스트 (필수 필드 누락)
POST {{baseUrl}}/api/{{apiVersion}}/members
Content-Type: {{contentType}}
Accept: {{contentType}}

{
  "mem_userid": "noname001"
}


### ============================================
### 5. 회원 전체 업데이트 (PUT /members/{id})
### ============================================

### 5-1. 전체 필드 업데이트
PUT {{baseUrl}}/api/{{apiVersion}}/members/1
Content-Type: {{contentType}}
Accept: {{contentType}}

{
  "mem_email": "updated@example.com",
  "mem_username": "업데이트된 이름",
  "mem_phone": "010-9999-8888",
  "mem_nickname": "업데이트닉네임"
}

### 5-2. ETag 기반 낙관적 동시성 제어 (If-Match)
PUT {{baseUrl}}/api/{{apiVersion}}/members/1
Content-Type: {{contentType}}
Accept: {{contentType}}
If-Match: "abc123def456"

{
  "mem_email": "etag@example.com",
  "mem_username": "ETag 테스트"
}


### ============================================
### 6. 회원 부분 업데이트 (PATCH /members/{id})
### ============================================

### 6-1. 이메일만 수정
PATCH {{baseUrl}}/api/{{apiVersion}}/members/1
Content-Type: {{contentType}}
Accept: {{contentType}}

{
  "mem_email": "patched@example.com"
}

### 6-2. 전화번호만 수정
PATCH {{baseUrl}}/api/{{apiVersion}}/members/1
Content-Type: {{contentType}}
Accept: {{contentType}}

{
  "mem_phone": "010-5555-6666"
}

### 6-3. 여러 필드 동시 수정
PATCH {{baseUrl}}/api/{{apiVersion}}/members/1
Content-Type: {{contentType}}
Accept: {{contentType}}

{
  "mem_username": "부분수정이름",
  "mem_phone": "010-7777-8888",
  "mem_nickname": "부분수정닉네임"
}


### ============================================
### 7. 회원 삭제 (DELETE /members/{id})
### ============================================

### 7-1. 회원 삭제
DELETE {{baseUrl}}/api/{{apiVersion}}/members/99
Accept: {{contentType}}

### 7-2. 존재하지 않는 회원 삭제 (404 확인)
DELETE {{baseUrl}}/api/{{apiVersion}}/members/99999
Accept: {{contentType}}


### ============================================
### 8. 에러 케이스 테스트
### ============================================

### 8-1. 존재하지 않는 리소스 조회 (404)
GET {{baseUrl}}/api/{{apiVersion}}/members/99999
Accept: {{contentType}}

### 8-2. 잘못된 HTTP 메서드 (405)
OPTIONS {{baseUrl}}/api/{{apiVersion}}/members/1
Accept: {{contentType}}

### 8-3. 잘못된 JSON 형식 (400)
POST {{baseUrl}}/api/{{apiVersion}}/members
Content-Type: {{contentType}}
Accept: {{contentType}}

{
  "mem_userid": "badjson"
  "mem_email": "missing comma"
}


### ============================================
### 9. 헤더 테스트
### ============================================

### 9-1. 커스텀 API 버전 헤더
GET {{baseUrl}}/api/{{apiVersion}}/members/1
Accept: {{contentType}}
X-API-Version: v1

### 9-2. Accept 헤더 테스트
GET {{baseUrl}}/api/{{apiVersion}}/members/1
Accept: application/json

### 9-3. User-Agent 테스트
GET {{baseUrl}}/api/{{apiVersion}}/members/1
Accept: {{contentType}}
User-Agent: REST-Client/VSCode Testing


### ============================================
### 10. HATEOAS 링크 검증
### ============================================

### 10-1. 응답에서 링크 확인
GET {{baseUrl}}/api/{{apiVersion}}/members/1
Accept: {{contentType}}

### 10-2. 페이지네이션 링크 확인
GET {{baseUrl}}/api/{{apiVersion}}/members?page=1&limit=5
Accept: {{contentType}}


### ============================================
### 참고사항
### ============================================
# 1. @name 으로 응답을 변수로 저장 가능
# 2. {{variableName.response.body.data.id}} 로 응답 데이터 접근
# 3. {{$timestamp}} - 현재 타임스탬프
# 4. {{$randomInt}} - 랜덤 정수
# 5. {{$guid}} - GUID 생성
# 6. ### 로 구분된 각 요청을 독립적으로 실행 가능
### ============================================

